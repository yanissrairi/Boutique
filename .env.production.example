# =============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION (Hetzner VPS)
# =============================================================================
# Copy this file to .env on your production server
#
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d
# This uses external managed services (Supabase + Vercel KV)
# =============================================================================

# -----------------------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------------------
NODE_ENV=production

# -----------------------------------------------------------------------------
# Supabase PostgreSQL Database
# -----------------------------------------------------------------------------
# Get this from: Supabase Dashboard > Project Settings > Database > Connection String
# Use the "Session Pooler" connection string (port 6543)
# Format: postgresql://postgres.[PROJECT-ID]:[PASSWORD]@[REGION].pooler.supabase.com:6543/postgres
# Example: postgresql://postgres.abcdefgh:mypassword@aws-0-eu-central-1.pooler.supabase.com:6543/postgres

DATABASE_URL=postgresql://postgres.[PROJECT-ID]:[PASSWORD]@[REGION].pooler.supabase.com:6543/postgres

# -----------------------------------------------------------------------------
# Vercel KV Redis Cache
# -----------------------------------------------------------------------------
# Get this from: Vercel Dashboard > Storage > KV > Environment Variables
# Use KV_URL (standard Redis protocol)
# Format: redis://default:[TOKEN]@[REGION].kv.vercel-storage.com:6379
# Example: redis://default:AbCdEf123@us1-vocal-llama-12345.kv.vercel-storage.com:6379

REDIS_URL=redis://default:[TOKEN]@[REGION].kv.vercel-storage.com:6379

# -----------------------------------------------------------------------------
# Medusa Backend (Production URLs)
# -----------------------------------------------------------------------------
MEDUSA_PORT=9000
MEDUSA_BACKEND_URL=https://api.yourdomain.com

# -----------------------------------------------------------------------------
# Frontend Next.js (Vercel Deployment)
# -----------------------------------------------------------------------------
# These variables are configured in Vercel Dashboard, NOT in this file
# Listed here for documentation purposes:
# - NEXT_PUBLIC_MEDUSA_BACKEND_URL: https://api.yourdomain.com
# - NEXT_PUBLIC_BASE_URL: https://yourdomain.com
#
# Vercel auto-detects Next.js and handles:
# ✅ SSR/ISR/Static Generation
# ✅ Edge Functions
# ✅ Global CDN
# ✅ Automatic HTTPS

# -----------------------------------------------------------------------------
# CORS Configuration (Production Domains)
# -----------------------------------------------------------------------------
# Replace with your actual production domains (comma-separated)
STORE_CORS=https://yourdomain.com,https://www.yourdomain.com
ADMIN_CORS=https://admin.yourdomain.com

# -----------------------------------------------------------------------------
# Authentication Secrets (CRITICAL - GENERATE STRONG SECRETS!)
# -----------------------------------------------------------------------------
# ⚠️  NEVER use default values in production!
# Generate strong secrets using: openssl rand -base64 32
# Run this command twice to get two different secrets

JWT_SECRET=REPLACE_WITH_STRONG_SECRET_FROM_OPENSSL
COOKIE_SECRET=REPLACE_WITH_STRONG_SECRET_FROM_OPENSSL

# -----------------------------------------------------------------------------
# Optional Production Settings
# -----------------------------------------------------------------------------
# Set to true to disable the built-in admin dashboard
# (useful if you deploy admin separately)
DISABLE_MEDUSA_ADMIN=false
